import{a as w,b as s,c as q,d as z,f as R,g as V,h as M,i as P,j as I,k as L,l as O,n as j}from"./chunk-Z7YACP6Y.js";import{C as a,E as D,F as A,G as E,M as d,N as m,Q as b,R as r,S as o,T as c,U as S,V as k,W as h,X as C,Z as n,ia as N,la as T,n as v,oa as G,q as x,qa as $,r as F,ra as H,s as B,ta as y,ua as J}from"./chunk-2HKLM7FD.js";function U(e,t){e&1&&(r(0,"div",9),n(1," \u0422\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B "),o())}function W(e,t){e&1&&(r(0,"div",9),n(1," \u0422\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B "),o())}function X(e,t){e&1&&n(0," \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D. ")}function Y(e,t){e&1&&n(0," \u0422\u043E\u043B\u044C\u043A\u043E \u0446\u0438\u0444\u0440\u044B \u0438, \u043F\u0440\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E\u0441\u0442\u0438, \u0437\u043D\u0430\u043A \xAB+\xBB \u0432 \u043D\u0430\u0447\u0430\u043B\u0435. ")}function Z(e,t){e&1&&n(0," \u041D\u043E\u043C\u0435\u0440 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0440\u043E\u0432\u043D\u043E 11 \u0446\u0438\u0444\u0440. ")}function ee(e,t){if(e&1&&(r(0,"div",9),d(1,X,1,0)(2,Y,1,0)(3,Z,1,0),o()),e&2){let i=h(2);a(),m(i.f.phone.errors.required?1:i.f.phone.errors.phoneChars?2:i.f.phone.errors.phoneLen?3:-1)}}function te(e,t){e&1&&n(0," \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0438\u043D\u0434\u0435\u043A\u0441. ")}function ue(e,t){e&1&&n(0," \u0414\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0440\u043E\u0432\u043D\u043E 6 \u0446\u0438\u0444\u0440. ")}function ie(e,t){if(e&1&&(r(0,"div",9),d(1,te,1,0)(2,ue,1,0),o()),e&2){let i=h(2);a(),m(i.f.zip.errors.required?1:i.f.zip.errors.pattern?2:-1)}}function oe(e,t){e&1&&(r(0,"div",9),n(1," \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u044B \u0442\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B, \u0446\u0438\u0444\u0440\u044B, \u043F\u0440\u043E\u0431\u0435\u043B, \xAB-\xBB \u0438 \xAB/\xBB. "),o())}function ne(e,t){e&1&&n(0," \u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430... ")}function re(e,t){e&1&&n(0," \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C ")}function ae(e,t){if(e&1){let i=S();r(0,"form",5),k("ngSubmit",function(){F(i);let p=h();return B(p.submit())}),r(1,"div",6)(2,"label",7),n(3,"\u0418\u043C\u044F "),o(),c(4,"input",8),d(5,U,2,0,"div",9),o(),r(6,"div",6)(7,"label",10),n(8,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F "),o(),c(9,"input",11),d(10,W,2,0,"div",9),o(),r(11,"div",6)(12,"label",12),n(13,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D "),o(),c(14,"input",13),d(15,ee,4,1,"div",9),o(),r(16,"div",14)(17,"label",15),n(18,"\u0421\u0442\u0440\u0430\u043D\u0430 "),o(),c(19,"input",16),o(),r(20,"div",14)(21,"label",17),n(22,"\u0418\u043D\u0434\u0435\u043A\u0441"),o(),c(23,"input",18),d(24,ie,3,1,"div",9),o(),r(25,"div",19)(26,"label",20),n(27,"\u0410\u0434\u0440\u0435\u0441 "),o(),c(28,"input",21),d(29,oe,2,0,"div",9),o(),r(30,"div",19)(31,"label",22),n(32,"\u0422\u043E\u0432\u0430\u0440 "),o(),c(33,"input",23),r(34,"div",24),n(35,"\u0412\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0442\u043E\u0432\u0430\u0440 \u043D\u0435\u043B\u044C\u0437\u044F \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C"),o()(),r(36,"div",19)(37,"label",25),n(38,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 "),o(),c(39,"textarea",26),o(),r(40,"div",19)(41,"button",27),d(42,ne,1,0)(43,re,1,0),o()()()}if(e&2){let i,l,p,f,u=h();b("formGroup",u.orderForm),a(4),C("is-invalid",((i=u.orderForm.get("name"))==null?null:i.invalid)&&(((i=u.orderForm.get("name"))==null?null:i.touched)||((i=u.orderForm.get("name"))==null?null:i.dirty))),a(),m((l=u.orderForm.get("name"))!=null&&l.errors&&((l=u.orderForm.get("name"))!=null&&l.touched||(l=u.orderForm.get("name"))!=null&&l.dirty)?5:-1),a(4),C("is-invalid",((p=u.orderForm.get("surname"))==null?null:p.invalid)&&(((p=u.orderForm.get("surname"))==null?null:p.touched)||((p=u.orderForm.get("surname"))==null?null:p.dirty))),a(),m((f=u.orderForm.get("surname"))!=null&&f.errors&&((f=u.orderForm.get("surname"))!=null&&f.touched||(f=u.orderForm.get("surname"))!=null&&f.dirty)?10:-1),a(4),C("is-invalid",u.f.phone.invalid&&(u.f.phone.dirty||u.f.phone.touched)),a(),m(u.f.phone.errors&&(u.f.phone.dirty||u.f.phone.touched)?15:-1),a(8),C("is-invalid",u.f.zip.invalid&&(u.f.zip.dirty||u.f.zip.touched)),a(),m(u.f.zip.errors&&(u.f.zip.dirty||u.f.zip.touched)?24:-1),a(4),C("is-invalid",u.f.address.invalid&&u.isShown(u.f.address)),a(),m(u.f.address.errors&&u.isShown(u.f.address)?29:-1),a(12),b("disabled",u.orderForm.invalid||u.sending),a(),m(u.sending?42:43)}}function le(e,t){e&1&&(r(0,"div",4)(1,"h3",28),n(2," \u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u0437\u0430\u043A\u0430\u0437. \u041C\u044B \u0441\u0432\u044F\u0436\u0435\u043C\u0441\u044F \u0441 \u0432\u0430\u043C\u0438 \u0432 \u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043C\u044F! "),o(),r(3,"a",29),n(4,"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u0432 \u043A\u0430\u0442\u0430\u043B\u043E\u0433 "),o()())}function de(e){let t=(e.value??"").trim();return/^\+?\d+$/.test(t)?t.replace(/\D/g,"").length!==11?{phoneLen:!0}:null:{phoneChars:!0}}var g=class e{constructor(t){this.router=t;let i=this.router.getCurrentNavigation();if(i?.extras.state){let l=i.extras.state.product;l&&(this.selectedProduct=l.title)}}route=x(G);fb=x(O);http=x(T);lettersOnly=s.pattern(/^[\p{L}]+$/u);sending=!1;success=!1;error=!1;isShown(t){return!!t&&(t.dirty||t.touched)}orderForm=this.fb.group({name:["",[s.required,this.lettersOnly]],surname:["",[s.required,this.lettersOnly]],phone:["",[s.required,de]],country:["",s.required],zip:["",[s.required,s.pattern(/^\d{6}$/)]],address:["",[s.required,s.pattern(/^[\p{L}\d\s\-\/]+$/u)]],product:[{value:"",disabled:!0}],comment:[""]});get f(){return this.orderForm.controls}selectedProduct="";ngOnInit(){let t=this.route.snapshot.queryParamMap.get("product")??"";this.orderForm.get("product")?.setValue(t)}submit(){if(this.orderForm.invalid||this.sending)return;this.sending=!0,this.success=!1,this.error=!1;let t=this.orderForm.getRawValue(),i={name:t.name??"",last_name:t.surname??"",phone:t.phone??"",country:t.country??"",zip:t.zip??"",product:t.product??"",address:t.address??"",comment:t.comment??""};this.http.post("https://testologia.ru/order-tea",i).subscribe({next:l=>{this.sending=!1,l?.success===1?this.success=!0:(this.error=!0,setTimeout(()=>this.error=!1,3e3))},error:()=>{this.sending=!1,this.error=!0,setTimeout(()=>this.error=!1,3e3)}})}static \u0275fac=function(i){return new(i||e)(D($))};static \u0275cmp=A({type:e,selectors:[["checkout-component"]],standalone:!1,decls:6,vars:1,consts:[[1,"col-lg-7","mx-auto","mb-5"],[1,"order-form"],[1,"h2","text-center","my-5"],["novalidate","",1,"row","g-3","wow","animate__bounceInRight",3,"formGroup"],[1,"text-center","my-5"],["novalidate","",1,"row","g-3","wow","animate__bounceInRight",3,"ngSubmit","formGroup"],[1,"col-md-4"],["for","name",1,"form-label"],["type","text","formControlName","name","id","name","name","name","aria-label","First name","required","",1,"form-control"],[1,"invalid-feedback","d-block"],["for","surname",1,"form-label"],["type","text","formControlName","surname","id","surname","name","surname","aria-label","surname","required","",1,"form-control"],["for","phone",1,"form-label"],["type","tel","formControlName","phone","id","phone","name","phone","aria-label","phone","maxlength","12","required","",1,"form-control"],[1,"col-md-6"],["for","country",1,"form-label"],["type","text","id","country","formControlName","country","name","country","aria-label","country","required","",1,"form-control"],["for","zip",1,"form-label"],["type","text","id","zip","formControlName","zip","name","zip","aria-label","zip","inputmode","numeric","pattern","[0-9]*","maxlength","6","required","",1,"form-control"],[1,"col-12"],["for","address",1,"form-label"],["type","text","formControlName","address","id","address","name","address","aria-label","address","required","",1,"form-control","mb-3"],["for","product",1,"form-label"],["type","text","id","product","name","product","formControlName","product",1,"form-control","bg-body-secondary","text-body-secondary"],[1,"form-text"],["for","comment",1,"form-label"],["id","comment","name","comment","rows","4","formControlName","comment","placeholder","\u0412\u0430\u0448\u0438 \u043F\u043E\u0436\u0435\u043B\u0430\u043D\u0438\u044F \u043A \u0437\u0430\u043A\u0430\u0437\u0443, \u043E\u0441\u043E\u0431\u044B\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0438\u044F \u043F\u043E \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0435 \u0438 \u0442.\u0434.",1,"form-control"],["type","submit","id","form-button",1,"btn","btn-primary","px-5","hvr-grow",3,"disabled"],[1,"fs-3","my-5","p-5","rounded-4","bg-success","text-light"],["routerLink","/shop",1,"btn","btn-outline-primary"]],template:function(i,l){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),n(3,"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),o(),d(4,ae,44,18,"form",3)(5,le,5,0,"div",4),o()()),i&2&&(a(4),m(l.success?5:4))},dependencies:[R,w,q,z,P,I,L,V,M,H],encapsulation:2})};var me=[{path:"",component:g,title:"\u041E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430"}],_=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=E({type:e});static \u0275inj=v({imports:[y.forChild(me),y]})};var Q=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=E({type:e});static \u0275inj=v({imports:[N,j,J,_,_]})};export{Q as OrderModule};
